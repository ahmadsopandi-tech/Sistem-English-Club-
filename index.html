<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Club - Sistem Ekstrakurikuler</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: #333;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(90deg, #2c3e50, #4ca1af);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5rem;
        }
        
        .content {
            padding: 30px;
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
        }
        
        button {
            background: linear-gradient(90deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s;
        }
        
        button:hover {
            background: linear-gradient(90deg, #45a049, #4CAF50);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        button.danger {
            background: linear-gradient(90deg, #f44336, #d32f2f);
        }
        
        button.danger:hover {
            background: linear-gradient(90deg, #d32f2f, #f44336);
        }
        
        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .card h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #4ca1af;
            padding-bottom: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: #f2f2f2;
            font-weight: 600;
        }
        
        tr:hover {
            background-color: #f5f5f5;
        }
        
        .notification {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 5px solid #28a745;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 5px solid #dc3545;
        }
        
        .points-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .point-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            padding: 0;
        }
        
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .menu-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
        
        .menu-card h3 {
            margin-top: 0;
            font-size: 1.5rem;
        }
        
        .menu-card p {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        @media (max-width: 768px) {
            .menu-grid {
                grid-template-columns: 1fr;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>English Club</h1>
            <p>Sistem Ekstrakurikuler</p>
        </div>
        
        <div class="content">
            <!-- Login Section -->
            <div id="loginSection" class="section active">
                <div class="card">
                    <h2>Login Admin</h2>
                    <div id="loginMessage"></div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" placeholder="dutaofindonesian@gmail.com">
                    </div>
                    <div class="form-group">
                        <label for="password">Password:</label>
                        <input type="password" id="password" placeholder="English Club">
                    </div>
                    <button onclick="login()">Login</button>
                </div>
            </div>
            
            <!-- Main Menu Section -->
            <div id="mainMenuSection" class="section">
                <h2>Menu Utama</h2>
                <div class="menu-grid">
                    <div class="menu-card" onclick="showSection('attendanceOfficers')">
                        <h3>Absensi Pengurus</h3>
                        <p>Catat kehadiran pengurus</p>
                    </div>
                    <div class="menu-card" onclick="showSection('attendanceMembers')">
                        <h3>Absensi Anggota</h3>
                        <p>Catat kehadiran anggota</p>
                    </div>
                    <div class="menu-card" onclick="showSection('notifications')">
                        <h3>Notifikasi/Notulen</h3>
                        <p>Kelola kegiatan dan notulen</p>
                    </div>
                    <div class="menu-card" onclick="showSection('points')">
                        <h3>Penilaian Keaktifan</h3>
                        <p>Kelola poin keaktifan</p>
                    </div>
                    <div class="menu-card" onclick="showSection('adminPanel')">
                        <h3>Admin Panel</h3>
                        <p>Kelola pengaturan sistem</p>
                    </div>
                </div>
                <div class="btn-group">
                    <button onclick="logout()">Logout</button>
                </div>
            </div>
            
            <!-- Attendance Officers Section -->
            <div id="attendanceOfficersSection" class="section">
                <div class="card">
                    <h2>Absensi Pengurus</h2>
                    <div class="form-group">
                        <label for="activitySelectOfficers">Pilih Kegiatan:</label>
                        <select id="activitySelectOfficers"></select>
                    </div>
                    <button onclick="loadAttendanceOfficers()">Tampilkan Form</button>
                    
                    <div id="attendanceOfficersForm" style="display:none;">
                        <table id="attendanceOfficersTable">
                            <thead>
                                <tr>
                                    <th>Nama</th>
                                    <th>Status</th>
                                    <th>Kehadiran</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <button onclick="saveAttendanceOfficers()">Simpan Absensi</button>
                    </div>
                </div>
                <div class="btn-group">
                    <button onclick="showSection('mainMenu')">Kembali ke Menu</button>
                </div>
            </div>
            
            <!-- Attendance Members Section -->
            <div id="attendanceMembersSection" class="section">
                <div class="card">
                    <h2>Absensi Anggota</h2>
                    <div class="form-group">
                        <label for="activitySelectMembers">Pilih Kegiatan:</label>
                        <select id="activitySelectMembers"></select>
                    </div>
                    <button onclick="loadAttendanceMembers()">Tampilkan Form</button>
                    
                    <div id="attendanceMembersForm" style="display:none;">
                        <table id="attendanceMembersTable">
                            <thead>
                                <tr>
                                    <th>Nama</th>
                                    <th>Status</th>
                                    <th>Kehadiran</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                        <button onclick="saveAttendanceMembers()">Simpan Absensi</button>
                    </div>
                </div>
                <div class="btn-group">
                    <button onclick="showSection('mainMenu')">Kembali ke Menu</button>
                </div>
            </div>
            
            <!-- Notifications Section -->
            <div id="notificationsSection" class="section">
                <div class="card">
                    <h2>Notifikasi/Notulen Kegiatan</h2>
                    <div id="notificationsList"></div>
                    <button onclick="showAddNotificationForm()">Tambah Kegiatan Baru</button>
                    
                    <div id="addNotificationForm" style="display:none;" class="card">
                        <h3>Tambah Kegiatan Baru</h3>
                        <div class="form-group">
                            <label for="notificationTitle">Judul Kegiatan:</label>
                            <input type="text" id="notificationTitle">
                        </div>
                        <div class="form-group">
                            <label for="notificationDate">Tanggal:</label>
                            <input type="date" id="notificationDate">
                        </div>
                        <div class="form-group">
                            <label for="notificationDesc">Deskripsi/Notulen:</label>
                            <textarea id="notificationDesc" rows="4"></textarea>
                        </div>
                        <button onclick="saveNotification()">Simpan</button>
                        <button onclick="cancelAddNotification()">Batal</button>
                    </div>
                </div>
                <div class="btn-group">
                    <button onclick="showSection('mainMenu')">Kembali ke Menu</button>
                </div>
            </div>
            
            <!-- Points Section -->
            <div id="pointsSection" class="section">
                <div class="card">
                    <h2>Penilaian Keaktifan Peserta</h2>
                    <table id="pointsTable">
                        <thead>
                            <tr>
                                <th>Nama</th>
                                <th>Status</th>
                                <th>Poin</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="btn-group">
                    <button onclick="showSection('mainMenu')">Kembali ke Menu</button>
                </div>
            </div>
            
            <!-- Admin Panel Section -->
            <div id="adminPanelSection" class="section">
                <div class="card">
                    <h2>Admin Panel</h2>
                    <h3>Kelola Pengguna</h3>
                    <button onclick="showAddUserForm()">Tambah Pengguna Baru</button>
                    
                    <div id="addUserForm" style="display:none;" class="card">
                        <h3>Tambah Pengguna Baru</h3>
                        <div class="form-group">
                            <label for="newUserName">Nama:</label>
                            <input type="text" id="newUserName">
                        </div>
                        <div class="form-group">
                            <label for="newUserRole">Status:</label>
                            <select id="newUserRole">
                                <option value="pengurus">Pengurus</option>
                                <option value="anggota">Anggota</option>
                            </select>
                        </div>
                        <button onclick="addUser()">Simpan</button>
                        <button onclick="cancelAddUser()">Batal</button>
                    </div>
                    
                    <table id="usersTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nama</th>
                                <th>Status</th>
                                <th>Poin</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                
                <div class="card">
                    <h3>Pengaturan Login</h3>
                    <div class="form-group">
                        <label for="adminEmail">Email Admin:</label>
                        <input type="email" id="adminEmail">
                    </div>
                    <div class="form-group">
                        <label for="adminPassword">Password Admin:</label>
                        <input type="password" id="adminPassword">
                    </div>
                    <button onclick="updateAdminCredentials()">Update Login</button>
                </div>
                
                <div class="btn-group">
                    <button onclick="showSection('mainMenu')">Kembali ke Menu</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize data
        function initializeData() {
            if (!localStorage.getItem('users')) {
                const users = [
                    { id: 1, name: 'Admin', role: 'pengurus', points: 0 },
                    { id: 2, name: 'John Doe', role: 'pengurus', points: 0 },
                    { id: 3, name: 'Jane Smith', role: 'anggota', points: 0 },
                    { id: 4, name: 'Michael Johnson', role: 'anggota', points: 0 }
                ];
                localStorage.setItem('users', JSON.stringify(users));
            }
            
            if (!localStorage.getItem('activities')) {
                const activities = [
                    { id: 1, title: 'Meeting Pertama', date: '2024-06-15', description: 'Pembahasan program kerja' },
                    { id: 2, title: 'English Debate', date: '2024-06-22', description: 'Debat bahasa Inggris tema teknologi' }
                ];
                localStorage.setItem('activities', JSON.stringify(activities));
            }
            
            if (!localStorage.getItem('attendances')) {
                localStorage.setItem('attendances', JSON.stringify([]));
            }
            
            if (!localStorage.getItem('adminCredentials')) {
                localStorage.setItem('adminCredentials', JSON.stringify({
                    email: 'dutaofindonesian@gmail.com',
                    password: 'English Club'
                }));
            }
        }
        
        // Login functionality
        function login() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const credentials = JSON.parse(localStorage.getItem('adminCredentials'));
            
            if (email === credentials.email && password === credentials.password) {
                showSection('mainMenu');
                document.getElementById('loginMessage').innerHTML = '';
            } else {
                document.getElementById('loginMessage').innerHTML = 
                    '<div class="error">Email atau password salah!</div>';
            }
        }
        
        // Logout functionality
        function logout() {
            showSection('login');
            document.getElementById('email').value = '';
            document.getElementById('password').value = '';
        }
        
        // Section navigation
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId + 'Section').classList.add('active');
            
            // Load section-specific data
            if (sectionId === 'attendanceOfficers' || sectionId === 'attendanceMembers') {
                loadActivitiesSelect();
            } else if (sectionId === 'notifications') {
                loadNotifications();
            } else if (sectionId === 'points') {
                loadPoints();
            } else if (sectionId === 'adminPanel') {
                loadUsers();
                loadAdminCredentials();
            }
        }
        
        // Load activities for select dropdown
        function loadActivitiesSelect() {
            const activities = JSON.parse(localStorage.getItem('activities')) || [];
            const officersSelect = document.getElementById('activitySelectOfficers');
            const membersSelect = document.getElementById('activitySelectMembers');
            
            officersSelect.innerHTML = '';
            membersSelect.innerHTML = '';
            
            activities.forEach(activity => {
                const option1 = document.createElement('option');
                option1.value = activity.id;
                option1.textContent = `${activity.title} (${activity.date})`;
                officersSelect.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = activity.id;
                option2.textContent = `${activity.title} (${activity.date})`;
                membersSelect.appendChild(option2);
            });
        }
        
        // Load attendance form for officers
        function loadAttendanceOfficers() {
            const activityId = document.getElementById('activitySelectOfficers').value;
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const officers = users.filter(user => user.role === 'pengurus');
            const attendances = JSON.parse(localStorage.getItem('attendances')) || [];
            
            const tbody = document.querySelector('#attendanceOfficersTable tbody');
            tbody.innerHTML = '';
            
            officers.forEach(officer => {
                const row = document.createElement('tr');
                
                // Name cell
                const nameCell = document.createElement('td');
                nameCell.textContent = officer.name;
                row.appendChild(nameCell);
                
                // Role cell
                const roleCell = document.createElement('td');
                roleCell.textContent = officer.role;
                row.appendChild(roleCell);
                
                // Attendance cell
                const attendanceCell = document.createElement('td');
                const select = document.createElement('select');
                select.setAttribute('data-user-id', officer.id);
                
                // Check if attendance already exists
                const existingAttendance = attendances.find(a => 
                    a.activityId == activityId && a.userId == officer.id
                );
                
                const options = ['Hadir', 'Izin', 'Alfa'];
                options.forEach(option => {
                    const optionElement = document.createElement('option');
                    optionElement.value = option;
                    optionElement.textContent = option;
                    if (existingAttendance && existingAttendance.status === option) {
                        optionElement.selected = true;
                    }
                    select.appendChild(optionElement);
                });
                
                attendanceCell.appendChild(select);
                row.appendChild(attendanceCell);
                
                tbody.appendChild(row);
            });

document.getElementById('attendanceOfficersForm').style.display = 'block';
        }
        
        // Save attendance for officers
        function saveAttendanceOfficers() {
            const activityId = document.getElementById('activitySelectOfficers').value;
            const selects = document.querySelectorAll('#attendanceOfficersTable select[data-user-id]');
            const attendances = JSON.parse(localStorage.getItem('attendances')) || [];
            
            selects.forEach(select => {
                const userId = select.getAttribute('data-user-id');
                const status = select.value;
                
                // Find existing attendance
                const existingIndex = attendances.findIndex(a => 
                    a.activityId == activityId && a.userId == userId
                );
                
                if (existingIndex !== -1) {
                    attendances[existingIndex].status = status;
                } else {
                    attendances.push({
                        id: Date.now(),
                        activityId: parseInt(activityId),
                        userId: parseInt(userId),
                        status: status
                    });
                }
            });
            
            localStorage.setItem('attendances', JSON.stringify(attendances));
            alert('Absensi pengurus berhasil disimpan!');
        }
        
        // Load attendance form for members
        function loadAttendanceMembers() {
            const activityId = document.getElementById('activitySelectMembers').value;
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const members = users.filter(user => user.role === 'anggota');
            const attendances = JSON.parse(localStorage.getItem('attendances')) || [];
            
            const tbody = document.querySelector('#attendanceMembersTable tbody');
            tbody.innerHTML = '';
            
            members.forEach(member => {
const row = document.createElement('tr');
                
                // Name cell
                const nameCell = document.createElement('td');
                nameCell.textContent = member.name;
                row.appendChild(nameCell);
                
                // Role cell
                const roleCell = document.createElement('td');
                roleCell.textContent = member.role;
                row.appendChild(roleCell);
                
                // Attendance cell
                const attendanceCell = document.createElement('td');
                const select = document.createElement('select');
                select.setAttribute('data-user-id', member.id);
                
                // Check if attendance already exists
                const existingAttendance = attendances.find(a => 
                    a.activityId == activityId && a.userId == member.id
                );
                
                const options = ['Hadir', 'Izin', 'Alfa'];
                options.forEach(option => {
                    const optionElement = document.createElement('option');
                    optionElement.value = option;
                    optionElement.textContent = option;
                    if (existingAttendance && existingAttendance.status === option) {
                        optionElement.selected = true;
                    }
                    select.appendChild(optionElement);
                });
                
                attendanceCell.appendChild(select);
                row.appendChild(attendanceCell);
                
                tbody.appendChild(row);
            });
            
            document.getElementById('attendanceMembersForm').style.display = 'block';
        }
        
        // Save attendance for members
        function saveAttendanceMembers() {
            const activityId = document.getElementById('activitySelectMembers').value;
            const selects = document.querySelectorAll('#attendanceMembersTable select[data-user-id]');
            const attendances = JSON.parse(localStorage.getItem('attendances')) || [];
            
            selects.forEach(select => {
const userId = select.getAttribute('data-user-id');
                const status = select.value;
                
                // Find existing attendance
                const existingIndex = attendances.findIndex(a => 
                    a.activityId == activityId && a.userId == userId
                );
                
                if (existingIndex !== -1) {
                    attendances[existingIndex].status = status;
                } else {
                    attendances.push({
                        id: Date.now(),
                        activityId: parseInt(activityId),
                        userId: parseInt(userId),
                        status: status
                    });
                }
            });
            
            localStorage.setItem('attendances', JSON.stringify(attendances));
            alert('Absensi anggota berhasil disimpan!');
        }
        
        // Load notifications
        function loadNotifications() {
            const activities = JSON.parse(localStorage.getItem('activities')) || [];
            const container = document.getElementById('notificationsList');
            container.innerHTML = '';
            
            if (activities.length === 0) {
                container.innerHTML = '<p>Belum ada kegiatan terjadwal.</p>';
                return;
            }
            
            activities.forEach(activity => {
                const card = document.createElement('div');
                card.className = 'card';
                
                const today = new Date();
                const activityDate = new Date(activity.date);
                const isUpcoming = activityDate >= today;
                
                card.innerHTML = `
<h3>${activity.title} ${isUpcoming ? '(Akan Datang)' : '(Selesai)'}</h3>
                    <p><strong>Tanggal:</strong> ${activity.date}</p>
                    <p><strong>Deskripsi:</strong> ${activity.description}</p>
                    <div class="btn-group">
                        <button onclick="editNotification(${activity.id})">Edit</button>
                        <button class="danger" onclick="deleteNotification(${activity.id})">Hapus</button>
                    </div>
                `;
                
                container.appendChild(card);
            });
        }
        
        // Show add notification form
        function showAddNotificationForm() {
            document.getElementById('addNotificationForm').style.display = 'block';
            document.getElementById('notificationTitle').value = '';
            document.getElementById('notificationDate').value = '';
            document.getElementById('notificationDesc').value = '';
        }
        
        // Cancel add notification
        function cancelAddNotification() {
            document.getElementById('addNotificationForm').style.display = 'none';
        }
        
        // Save notification
        function saveNotification() {
            const title = document.getElementById('notificationTitle').value;
            const date = document.getElementById('notificationDate').value;
            const description = document.getElementById('notificationDesc').value;
            
            if (!title || !date) {
                alert('Judul dan tanggal harus diisi!');
                return;
            }
            
            const activities = JSON.parse(localStorage.getItem('activities')) || [];
            const newId = activities.length > 0 ? Math.max(...activities.map(a => a.id)) + 1 : 1;
            
            activities.push({
                id: newId,
                title: title,
                date: date,
                description: description
            });
            
            localStorage.setItem('activities', JSON.stringify(activities));
            document.getElementById('addNotificationForm').style.display = 'none';
            loadNotifications();
alert('Kegiatan berhasil ditambahkan!');
        }
        
        // Edit notification
        function editNotification(id) {
            const activities = JSON.parse(localStorage.getItem('activities')) || [];
            const activity = activities.find(a => a.id === id);
            
            if (activity) {
                document.getElementById('notificationTitle').value = activity.title;
                document.getElementById('notificationDate').value = activity.date;
                document.getElementById('notificationDesc').value = activity.description;
                document.getElementById('addNotificationForm').style.display = 'block';
                
                // Change save button to update
                const saveBtn = document.querySelector('#addNotificationForm button');
                saveBtn.textContent = 'Update';
                saveBtn.setAttribute('onclick', `updateNotification(${id})`);
            }
        }
        
        // Update notification
        function updateNotification(id) {
            const title = document.getElementById('notificationTitle').value;
            const date = document.getElementById('notificationDate').value;
            const description = document.getElementById('notificationDesc').value;
            
            if (!title || !date) {
                alert('Judul dan tanggal harus diisi!');
                return;
            }
            
            const activities = JSON.parse(localStorage.getItem('activities')) || [];
            const index = activities.findIndex(a => a.id === id);
            
            if (index !== -1) {
                activities[index] = {
                    id: id,
                    title: title,
                    date: date,
                    description: description
                };
                
                localStorage.setItem('activities', JSON.stringify(activities));
                document.getElementById('addNotificationForm').style.display = 'none';
                loadNotifications();
                
                // Reset save button
const saveBtn = document.querySelector('#addNotificationForm button');
                saveBtn.textContent = 'Simpan';
                saveBtn.setAttribute('onclick', 'saveNotification()');
                
                alert('Kegiatan berhasil diperbarui!');
            }
        }
        
        // Delete notification
        function deleteNotification(id) {
            if (confirm('Apakah Anda yakin ingin menghapus kegiatan ini?')) {
                const activities = JSON.parse(localStorage.getItem('activities')) || [];
                const updatedActivities = activities.filter(a => a.id !== id);
                
                localStorage.setItem('activities', JSON.stringify(updatedActivities));
                loadNotifications();
                alert('Kegiatan berhasil dihapus!');
            }
        }
        
        // Load points
        function loadPoints() {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const tbody = document.querySelector('#pointsTable tbody');
            tbody.innerHTML = '';
            
            users.forEach(user => {
                const row = document.createElement('tr');
                
                // Name cell
                const nameCell = document.createElement('td');
                nameCell.textContent = user.name;
                row.appendChild(nameCell);
                
                // Role cell
                const roleCell = document.createElement('td');
                roleCell.textContent = user.role;
                row.appendChild(roleCell);
                
                // Points cell
                const pointsCell = document.createElement('td');
                pointsCell.textContent = user.points;
                row.appendChild(pointsCell);
                
                // Actions cell
                const actionsCell = document.createElement('td');
                actionsCell.className = 'points-control';
                
                const minusBtn = document.createElement('button');
                minusBtn.className = 'point-btn danger';
                minusBtn.textContent = '-';
minusBtn.setAttribute('onclick', `adjustPoints(${user.id}, -1)`);
                actionsCell.appendChild(minusBtn);
                
                const plusBtn = document.createElement('button');
                plusBtn.className = 'point-btn';
                plusBtn.textContent = '+';
                plusBtn.setAttribute('onclick', `adjustPoints(${user.id}, 1)`);
                actionsCell.appendChild(plusBtn);
                
                const editBtn = document.createElement('button');
                editBtn.textContent = 'Edit';
                editBtn.setAttribute('onclick', `editPoints(${user.id})`);
                actionsCell.appendChild(editBtn);
                
                row.appendChild(actionsCell);
                tbody.appendChild(row);
            });
        }
        
        // Adjust points
        function adjustPoints(userId, change) {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.id === userId);
            
            if (user) {
                user.points = Math.max(0, user.points + change); // Prevent negative points
                localStorage.setItem('users', JSON.stringify(users));
                loadPoints();
            }
        }
        
        // Edit points
        function editPoints(userId) {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.id === userId);
            
            if (user) {
                const newPoints = prompt(`Masukkan poin baru untuk ${user.name}:`, user.points);
                
                if (newPoints !== null && !isNaN(newPoints) && newPoints >= 0) {
                    user.points = parseInt(newPoints);
                    localStorage.setItem('users', JSON.stringify(users));
                    loadPoints();
                } else if (newPoints !== null) {
                    alert('Poin harus berupa angka positif!');
                }
            }
        }
        
        // Load users for admin panel
        function loadUsers() {
const users = JSON.parse(localStorage.getItem('users')) || [];
            const tbody = document.querySelector('#usersTable tbody');
            tbody.innerHTML = '';
            
            users.forEach(user => {
                const row = document.createElement('tr');
                
                // ID cell
                const idCell = document.createElement('td');
                idCell.textContent = user.id;
                row.appendChild(idCell);
                
                // Name cell
                const nameCell = document.createElement('td');
                nameCell.textContent = user.name;
                row.appendChild(nameCell);
                
                // Role cell
                const roleCell = document.createElement('td');
                roleCell.textContent = user.role;
                row.appendChild(roleCell);
                
                // Points cell
                const pointsCell = document.createElement('td');
                pointsCell.textContent = user.points;
                row.appendChild(pointsCell);
                
                // Actions cell
                const actionsCell = document.createElement('td');
                
                const editBtn = document.createElement('button');
                editBtn.textContent = 'Edit';
                editBtn.setAttribute('onclick', `editUser(${user.id})`);
                actionsCell.appendChild(editBtn);
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'danger';
                deleteBtn.textContent = 'Hapus';
                deleteBtn.setAttribute('onclick', `deleteUser(${user.id})`);
                actionsCell.appendChild(deleteBtn);
                
                row.appendChild(actionsCell);
                tbody.appendChild(row);
            });
        }
        
        // Show add user form
        function showAddUserForm() {
document.getElementById('addUserForm').style.display = 'block';
            document.getElementById('newUserName').value = '';
            document.getElementById('newUserRole').value = 'pengurus';
        }
        
        // Cancel add user
        function cancelAddUser() {
            document.getElementById('addUserForm').style.display = 'none';
        }
        
        // Add user
        function addUser() {
            const name = document.getElementById('newUserName').value;
            const role = document.getElementById('newUserRole').value;
            
            if (!name) {
                alert('Nama harus diisi!');
                return;
            }
            
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const newId = users.length > 0 ? Math.max(...users.map(u => u.id)) + 1 : 1;
            
            users.push({
                id: newId,
                name: name,
                role: role,
                points: 0
            });
            
            localStorage.setItem('users', JSON.stringify(users));
            document.getElementById('addUserForm').style.display = 'none';
            loadUsers();
            alert('Pengguna berhasil ditambahkan!');
        }
        
        // Edit user
        function editUser(userId) {
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const user = users.find(u => u.id === userId);
            
            if (user) {
                const newName = prompt('Masukkan nama baru:', user.name);
                
                if (newName !== null && newName.trim() !== '') {
                    user.name = newName.trim();
                    
                    const newRole = prompt('Masukkan status (pengurus/anggota):', user.role);
                    if (newRole === 'pengurus' || newRole === 'anggota') {
                        user.role = newRole;
                    }

localStorage.setItem('users', JSON.stringify(users));
                    loadUsers();
                    alert('Pengguna berhasil diperbarui!');
                } else if (newName !== null) {
                    alert('Nama tidak boleh kosong!');
                }
            }
        }
        
        // Delete user
        function deleteUser(userId) {
            if (confirm('Apakah Anda yakin ingin menghapus pengguna ini?')) {
                const users = JSON.parse(localStorage.getItem('users')) || [];
                const updatedUsers = users.filter(u => u.id !== userId);
                
                localStorage.setItem('users', JSON.stringify(updatedUsers));
                loadUsers();
                alert('Pengguna berhasil dihapus!');
            }
        }
        
        // Load admin credentials
        function loadAdminCredentials() {
            const credentials = JSON.parse(localStorage.getItem('adminCredentials'));
            document.getElementById('adminEmail').value = credentials.email;
            document.getElementById('adminPassword').value = credentials.password;
        }
        
        // Update admin credentials
        function updateAdminCredentials() {
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            
            if (!email || !password) {
                alert('Email dan password harus diisi!');
                return;
            }
            
            localStorage.setItem('adminCredentials', JSON.stringify({
                email: email,
                password: password
            }));
            
            alert('Login credentials berhasil diperbarui!');
        }
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            initializeData();
        });
    </script>
</body>
</html>
